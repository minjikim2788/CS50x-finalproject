# Technical Details
This documentation provides an in-depth route-by-route explanations.

## Register
The @app.route() tells the flask to associate this python function with URL "/register" and the POST and GET methods are supported by the route. If the request method is GET, the register.html template is rendered for the user to complete and submit the form. The form consists of fields for first name, last name, username, password, and password confirmation.

Once the user clicks the sign-up button and the form is submitted via the POST method, the Python function checks for possible errors. The errors could be no username / no password / no confirmation submitted in the form, the password and password confirmation do not match, or the username already exists. When these errors arise, the error.html template is rendered with a short message that explains the error. If all the inputs are valid, the information is inserted as a new row in the database table called users. Once done, the website redirects to "/" where the user will log in.

## Log in
The @app.route() tells the flask to associate this Python function with the URL "/login" and the POST and GET methods are supported by the route. Once the login button is clicked, the user_id is forgotten. If the request method is GET, the login.html template is rendered to complete a form consisting of username and password fields. Additionally, there is a hyperlink to redirect the user to the register page if they don't have an account.

Once the user clicks the login button and submits the form via the POST method, the Python function checks for possible errors. The errors could be no username / no password submitted in the form. The username provided is queried by the database table users to check whether or not the username exists and whether the password entered is the correct password. If any errors occur, the error.html template is rendered with a short message explaining the error. If all the inputs are valid, the user is logged in and redirected to the home page. The session is used to remember which user is logged in.

## Index
The homepage has a navigation bar at the top, with an icon at the left-hand top corner that redirects users to this index when clicked.

First name and last name is queried from the users database and greets the user whenever the home page is loaded. Below is an advertising phrase to explain the purpose of using this Budget Tracker. The user's current balance in big fonts, which is queried from the user database.

Below the balance are two columns. The left column reminds the user of their saving goal is queried from the users database, and also has a hyperlink to change their saving goal, which redirects to the "/goal" route. The amount of money left to reach that goal (calculated as goal - balance) is underneath the current goal. Also, an animated progress bar shows the user what percentage of their goal has been reached (calculated as balance * 100 / goal). The right column shows the results of query from the finance database for the four latest transactions. It only displays the description and amount of the transaction.

Below those two columns is another container displaying the statistics. One on the left shows the total expense and a button that redirects to "/expense" where the history of expense is. Total income is calculated from the sum of money in the finance database where the transaction type is a deposit. The other one on the right shows the total income and a button that redirects to "/income" where the history of income is. Total expense is calculated from the sum of money in the finance database where the transaction type is a withdraw.


## Income
The @app.route() tells the flask to associate this python function with URL "/income" and the POST and GET methods are supported by the route. If the request method is GET, the finance database is queried for the date, description, and amount of transactions for the history of the income table. Total income is calculated from the sum of money in the finance database where the transaction type is deposit. This is shown to the user at the end of the table of rows of income transactions. The income.html template is rendered with the variables to be used as placeholders in the HTML.]

Otherwise, if the request method is POST, the Python function allows the user to add a new record of income. The form requires the user to fill in the amount, description, and date. The amount is converted to a float and checked for a positive number. If one of the inputs is missing or the amount is a negative number, the error.html is rendered with a short message explaining the error. The balance in the users database is updated as balance + amount. The information submitted in the form is inserted as a new row in the finance database table with the transaction type as a deposit.

## Expense
The @app.route() tells the flask to associate this python function with URL "/expense" and the POST and GET methods are supported by the route. If the request method is GET, the finance database is queried for the date, description, and amount of transactions for the history of the expense table. Total expense is calculated from the sum of money in the finance database where the transaction type is withdraw. This is shown to the user at the end of the table of rows of income transactions. The expense.html template is rendered with the variables to be used as placeholders in the HTML.

Otherwise, if the request method is POST, the Python function allows the user to add a new record of expense. The form requires the user to fill in the amount, description, and date. The amount is converted to a float and checked for a positive number. If one of the inputs is missing or the amount is a negative number, the error.html is rendered with a short message explaining the error. The balance in the users database is updated as balance - amount. The information submitted in the form is inserted as a new row in the finance database table with the transaction type as withdraw.

## History
The @app.route() tells the flask to associate this python function with URL "/history" and the POST and GET methods are supported by the route. If the request method is GET, the finance database is queried for the date, type, description, and amount of all the transactions recorded. Total earning (totale) is calculated as the sum of money in the finance database where the transaction type is deposit. Total spending (totals) is calculated as the sum of money in the finance database where the transaction type is withdraw. Total earnings and total spending are shown to the user in the last row of the history of expense table, below all the records of transactions. The history.html template is rendered with the variables as placeholders in the HTML. The Python function also queries the finance database for distinct months of transactions. These data are displayed as an option in the select menu to filter their transaction table according to the month. I debated using a select menu or dropdown menu but decided to pick a select menu as my design choice.

When the month is selected and the button is labeled filter, the form is submitted via the POST method. Everything explained above happens except that the relevant data are conditioned with the month. This allows the user to view the transaction records, total earnings, and total spending during the selected month. The query for the month is kept the same so the users can click another month from the select menu and be redirected to "/history" which is filtered by the newly selected month. This prevents the inconvenience of having to click on the history navigation tab and then select the month to filter again.

## Goal
The @app.route() tells the flask to associate this python function with URL "/goal" and the POST and GET methods are supported by the route. If the request method is GET, the user is given a form to set their target saving amount. The users database is queried for goal and balance. The user's current goal in big fonts. The amount of money left to reach that goal (calculated as goal - balance) is underneath the current balance. An animated progress bar shows the user the percentage of their goal has been reached (calculated as balance * 100 / goal). The goal.html template is rendered with the variables as placeholders in the HTML.

If the request method is submitted as POST, which is when the user hits the enter button of the form, the function checks for possible errors. If the amount field of the form is incomplete or a negative number, error.html is rendered with a short message that explains the error. When all inputs are valid, the target amount is updated as a goal in the users database. Then, the user is redirected to the "/goal".

## Log out
The @app.route() tells the flask to associate this Python function with the URL "/logout". Once the log out button is clicked, the user_id is forgotten and redirected to "/". This tab allows the users to log out of their accounts. Users can then log in again or register for a new account.

## Error
The error.html extends the layout.html, so it shows the navigation bars when called upon. This allows the user to redirect themselves to other tabs, which is a better design than just displaying a blank page with text because the user would only have one option: go back to a previously viewed webpage. This html illustrates a big text stating "Error" and shows a short message that explains where and why the error occurred. The user can then take the feedback and adjust their input accordingly.
