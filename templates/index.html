{% extends "layout.html" %}

{% block title %}
    Index
{% endblock %}

{% block main %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    {% for name in names %}
    <h1>Welcome, {{ name.firstname }} {{ name.lastname }}</h1>
    {% endfor %}

    <h4>Take control of your finances and start turning your money goals into reality!</h4>
    <br>
    <br>
    {% for value in values %}
    <h3>Current balance:</h3>
    <h3>${{ value.balance }}</h3>
    <br>
    <br>

    <div class="container text-center">
      <div class="row justify-content-around">

        <div class="col-4">
          <h5>Your current goal: ${{ value.goal }}</h5>
          <p>Set your goal <a href="/goal">here</a></p>
          <br>
          <h5>To reach your goal: ${{ amountleft }} remaining</h5>
          <br>
          <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: {{ progress_value }}%">{{ progress_value }}%</div>
          </div>
        </div>

        <div class="col-4">
          <h5>Recent transactions:</h5>
          <br>
          {% for recenthistory in recenthistories %}
          <p>{{ recenthistory.description }}: ${{ recenthistory.money }}</p>
          {% endfor %}
        </div>

      </div>
    </div>
    {% endfor %}

    <br>
    <br>
    <h2>Statistics:</h2>
    <br>
    <div class="row">
        {% for total in total_income %}
        <div class="col-sm-6 mb-3 mb-sm-0">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Expenses</h5>
              <p class="card-text">Total expenses: ${{ total.amount }}</p>
              <a href="/expense" class="btn btn-primary">Show expenses</a>
            </div>
          </div>
        </div>
        {% endfor %}
        {% for total in total_expense %}
        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Income</h5>
              <p class="card-text">Total income: ${{ total.amount }}</p>
              <a href="/income" class="btn btn-primary">Show income</a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

{% endblock %}
